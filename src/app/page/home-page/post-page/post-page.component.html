
<div class="banner-edit-mode" *ngIf="isEditMode">
  <p> Voici une prévisualisation de l'application </p>
  <p> Dans cette verision vous pouvez faire toutes les modification nécessaire. </p>
</div>

<app-switch-button
  [switchOptions]="switchOptions"
  [isFirstSelected]="listViewSelected"
  (selected)="listViewSelected = $event"
>
</app-switch-button>

<div *ngIf="canAccess">

  <div class="div_button" *ngIf="isActivate">
    <div class="button" (click)="choosePicture()"> {{ 'Posts.create_post' | translate | capitalizeFirstLetter }} </div>
  </div>

  <!-- LIST -->
  <div *ngIf="listViewSelected">
    <app-card-post
      *ngFor="let post of posts; let index = index"
      [post]="post"
      [reactPostId]="reactPostId"
      [currentUser]="currentUser"
      [isActivate]="isActivate"
      (reaction)="reactPost($event)"
      (delete)="removePost($event)"
    >
    </app-card-post>

    <ng-template #dialogAddPost>
      <app-generic-image-cropper
        [maintainAspectRatio]="true"
        [imageChangedEvent]="pictureSrc"
        [multiRatio]="true"
        (croppedImage)="getCroppedImage($event)"
      >
      </app-generic-image-cropper>
    </ng-template>

  </div>

  <!-- GRID -->
  <div *ngIf="!listViewSelected" class="view-grid">

    <div class="image-grid">
      <img
        *ngFor="let post of postsGridView; let i = index"
        [src]="post.pictureUrl"
        [ngClass]="{'square': post.pictureRatio == 1, 'portrait': post.pictureRatio == 0.5, 'paysage': post.pictureRatio == 2} "
        (click)="openDialog(postsGridView[i])">
    </div>

    <ng-template #dialogContent>
      <app-card-post
        class="dialog"
        [post]="postDetail"
        [reactPostId]="reactPostId"
        [currentUser]="currentUser"
        [isActivate]="isActivate"
        [style]="'border-radius: 1.5rem; border: 0.5rem solid var(--secondary-dark);'"
        (reaction)="reactPost($event)"
        (delete)="removePost($event)"
      >
      </app-card-post>
    </ng-template>


  </div>
</div>

<div class="canNotAccess" *ngIf="!canAccess">
  <div class="card-login">
    <span class="font-primary-dark font-default-16"> {{ 'Auth.auth_required' | translate | capitalizeFirstLetter}} </span>
    <button mat-raised-button (click)="goToUserPage()"> {{ 'Auth.auth' | translate | capitalizeFirstLetter}} </button>
  </div>
</div>
